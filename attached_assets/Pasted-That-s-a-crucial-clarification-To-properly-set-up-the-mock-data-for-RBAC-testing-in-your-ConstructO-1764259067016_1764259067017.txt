That's a crucial clarification. To properly set up the mock data for RBAC testing in your ConstructOS platform, you must go beyond simple object creation and focus on creating data that specifically tests the access logic (the filters) defined in your Django REST Framework (DRF) views.Here is a refined breakdown of the specific mock data required for each role category, emphasizing the attributes needed for filtering.1. ‚öôÔ∏è Testing Tools and FrameworksYou should use Pytest with factory_boy and pytest-django for programmatic data creation.factory_boy: Define Factories for every model (ProjectFactory, OrderFactory, UserFactory). These factories will use the key filtering attributes (e.g., site_id, assigned_sales_rep_id) to generate objects quickly.Fixtures: Use Pytest Fixtures to create the test users, authenticate them, and set up the specific data environment (e.g., user_site_manager_johannesburg and the data associated with that site).APIClient: Use the DRF APIClient with force_authenticate() to simulate each user's request easily.2. üîë Core Filter Attributes and Data ScenariosEvery relevant mock record must contain predictable values for the following fields to facilitate assertion:AttributeTest Values NeededPurposesite_id (on Project, Order, Safety Report)SIT-JHB-001 (User's Site), SIT-CPT-999 (Other Site)Tests Geographic Scope. Assert the user only sees SIT-JHB-001 data.owner_id / assigned_user_id (on Lead, Opportunity)USR-SALES-A (User's ID), USR-SALES-B (Other User's ID)Tests Ownership Scope for Sales Reps and Field Workers.vendor_id (on PO, Invoice Bill)VEN-404-SUB (User's Vendor ID), VEN-111-OTH (Other Vendor ID)Tests External User Scope for Subcontractors.is_sensitive / is_payroll (on HR Records)True, FalseTests Data Sensitivity. Assert non-HR/Finance users cannot read True records.approval_status (on Invoice, PO)DRAFT, PENDING_FINANCE, APPROVEDTests Action/Workflow Permissions. Assert only Finance can move from PENDING to APPROVED.3. üë• Mock Data Requirements Per User CategoryA. Site/Field Roles (Site Manager, Field Worker, Warehouse Clerk)Goal: Test Geographic Isolation (get_queryset filtering).Required Data Set:User Fixtures: Create site_manager_user linked to site_id='SIT-JHB-001'. Create warehouse_clerk_user linked to warehouse_location_id='WH-CPT-003'.Data: Create a batch of 20 Orders where 10 are linked to SIT-JHB-001 and 10 are linked to other sites.Test Assertion: When site_manager_user requests the Order list API, the response must return 200 OK and contain exactly 10 records. When they try to PUT or DELETE the SIT-CPT-999 Order (via its ID), the response must be 403 Forbidden.B. Financial/HR Roles (Finance Manager, HR Specialist)Goal: Test Global Read/Write and Segregation of Duties (SoD).Required Data Set:User Fixtures: finance_manager_user.Data: Create one PurchaseOrder with approval_status='PENDING_FINANCE'. Create one Invoice that has an associated payment_date and is marked is_sensitive=True.Test Assertion:SoD: finance_manager_user successfully updates PO.approval_status to APPROVED (Success: 200). operations_specialist_user attempts to do the same (Failure: 403).Sensitivity: A non-HR user attempts to retrieve the is_sensitive=True Invoice (Failure: 403) but can view the is_sensitive=False Order.C. Sales/Operations Roles (Sales Rep, Operations Specialist)Goal: Test Ownership Filtering (Sales Rep) and Global Action (Operations Specialist).Required Data Set:User Fixtures: sales_rep_A (ID: USR-SALES-A).Data: 5 Leads owned by USR-SALES-A. 5 Leads owned by another user. Global list of all inventory items.Test Assertion:Sales Rep: sales_rep_A requests the Lead list API. Assertion: 10 records returned (if your policy is to show all leads, but only allow editing owned leads) OR 5 records returned (if your policy is to filter the list). They can PUT/PATCH their own Lead (Success: 200) but not the other user's (Failure: 403).Operations Specialist: Successfully PUT updates inventory stock levels across all warehouse_location_ids (Global Success: 200).D. External Roles (Subcontractor/Vendor, Client)Goal: Test Ownership (vendor_id or account_id) and Restricted Actions (e.g., Create-Only).Required Data Set:User Fixtures: subcontractor_user linked to vendor_id='VEN-404-SUB'.Data: 3 PurchaseOrders linked to VEN-404-SUB.Test Assertion:Subcontractor: Successfully retrieves only the 3 POs linked to their vendor_id. Successfully POSTs a new InvoiceBill (Create Success: 201). Attempts to PUT/DELETE the PO (Failure: 403).This structured approach ensures your test suite provides high confidence that your DRF permissions are correctly applied across the different microservices.If you are looking for practical examples of how to set up factory_boy with pytest, this video is a good reference point. Python | Django | Pytest Testing including Factory Boy provides a practical guide on integrating these tools to create test data for Django models.